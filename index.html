<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Smart Resume Builder</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: #f0f2f5;
      margin: 0;
      padding: 20px;
      transition: background 0.3s, color 0.3s;
    }

    .container {
      max-width: 1100px;
      margin: auto;
      background: white;
      padding: 30px;
      border-radius: 12px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }

    h1, h3 {
      color: #2c3e50;
    }

    h3 {
      border-bottom: 1px solid #ddd;
      padding-bottom: 6px;
    }

    body.dark h3 {
      border-color: #555;
    }

    .form-section {
      display: grid;
      grid-template-columns: repeat(auto-fit,minmax(250px,1fr));
      gap: 20px;
      margin-bottom: 20px;
    }

    .form-group {
      display: flex;
      flex-direction: column;
    }

    .form-group label {
      font-weight: bold;
      margin-bottom: 5px;
    }

    .form-group input, .form-group textarea, .form-group select {
      padding: 10px;
      font-size: 15px;
      border: 1px solid #ccc;
      border-radius: 5px;
    }

    textarea {
      resize: vertical;
    }

    button {
      padding: 12px 20px;
      font-size: 16px;
      border: none;
      border-radius: 6px;
      background-color: #007bff;
      color: white;
      cursor: pointer;
      margin-top: 20px;
      margin-right: 10px;
      transition: background-color 0.3s ease;
    }

    button:hover {
      background-color: #0056b3;
    }

    .add-btn {
      background-color: #007bff;
    }

    #resume-output {
      margin-top: 40px;
      padding: 30px;
      border: 2px dashed #ccc;
      border-radius: 10px;
      background: #fafafa;
      min-height: 100px;
    }

    .resume-template {
      padding: 20px;
      font-size: 16px;
    }

    .resume-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 20px;
    }

    .resume-header .info {
      flex: 1;
    }

    .resume-header img {
      width: 150px;
      height: 150px;
      object-fit: cover;
      border-radius: 5px;
      border: 1px solid #444;
      margin-left: 20px;
    }

    .education-table {
      border-collapse: collapse;
      width: 100%;
      margin-top: 10px;
    }

    .education-table th,
    .education-table td {
      border: 1px solid #444;
      padding: 8px;
      text-align: left;
    }

    .download-btn {
      background-color: #28a745;
    }

    body.dark {
      background: #18191a;
      color: #f5f6f7;
    }

    body.dark .container {
      background: #242526;
    }

    body.dark input, body.dark textarea, body.dark select {
      background: #3a3b3c;
      color: white;
      border-color: #555;
    }

    body.dark #resume-output {
      background: #1c1c1e;
      border-color: #444;
    }

    @media print {
      .resume-header img {
        width: 2in;
        height: 2in;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <div style="float:right; margin-bottom:10px;">
      <label style="margin-right:20px;">üëÅÔ∏è Preview
        <input type="checkbox" id="preview-toggle" checked />
      </label>
      <label>üåô Dark Mode
        <input type="checkbox" id="dark-mode-toggle" />
      </label>
    </div>

    <h1>üßæ Smart Resume Builder</h1>
    <form id="resume-form">
      <div class="form-section">
        <div class="form-group"><label for="name">Full Name</label><input type="text" id="name" required></div>
        <div class="form-group"><label for="email">Email</label><input type="email" id="email" required></div>
        <div class="form-group"><label for="phone">Phone</label><input type="text" id="phone" required></div>
        <div class="form-group"><label for="photo">Profile Photo</label><input type="file" id="photo" accept="image/*"></div>
      </div>

      <div class="form-section">
        <div class="form-group" style="grid-column: span 2;">
          <label>Profile Summary</label>
          <textarea id="summary" rows="4"></textarea>
        </div>
      </div>

      <div class="form-section">
        <div class="form-group" style="grid-column: span 2;">
          <label>Education üéì</label>
          <div id="education-container"></div>
          <button type="button" class="add-btn" onclick="addEducation()">Add Education</button>
        </div>
      </div>

      <div class="form-section">
        <div class="form-group">
          <label>Work Experience üíº</label>
          <div id="experience-container"></div>
          <button type="button" class="add-btn" onclick="addExperience()">Add Experience</button>
        </div>
      </div>

      <div class="form-section">
        <div class="form-group"><label>Skills üõ†Ô∏è</label><textarea id="skills" rows="3" required></textarea></div>
        <div class="form-group"><label>Certifications üìú</label><textarea id="certifications" rows="3"></textarea></div>
        <div class="form-group"><label>Languages üåê</label><textarea id="languages" rows="3"></textarea></div>
        <div class="form-group">
          <label>Choose Template</label>
          <select id="template">
            <option value="template1">Classic</option>
            <option value="template2">Modern</option>
          </select>
        </div>
      </div>

      <div class="form-section">
        <div class="form-group"><label>Strengths üí™</label><textarea id="strengths" rows="3"></textarea></div>
        <div class="form-group"><label>Weaknesses ü§î</label><textarea id="weaknesses" rows="3"></textarea></div>
      </div>

      <div class="form-section">
        <div class="form-group"><label>Hobbies & Interests üéØ</label><textarea id="hobbies" rows="3"></textarea></div>
      </div>

      <button type="submit">Generate Resume</button>
      <button type="button" onclick="resetForm()">Reset</button>
    </form>

    <div id="resume-output"></div>
    <button onclick="downloadPDF()" class="download-btn">Download as PDF</button>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.2/html2pdf.bundle.min.js"></script>
  <script>
    function addEducation() {
      const container = document.getElementById("education-container");
      const wrapper = document.createElement("div");
      wrapper.style.display = "grid";
      wrapper.style.gridTemplateColumns = "repeat(4, 1fr)";
      wrapper.style.gap = "10px";
      wrapper.style.marginBottom = "10px";

      const qualification = document.createElement("input");
      qualification.placeholder = "Qualification";
      qualification.className = "edu-entry";

      const institution = document.createElement("input");
      institution.placeholder = "Institution";
      institution.className = "edu-entry";

      const year = document.createElement("input");
      year.placeholder = "Year";
      year.className = "edu-entry";

      const grade = document.createElement("input");
      grade.placeholder = "Grade/Score";
      grade.className = "edu-entry";

      wrapper.appendChild(qualification);
      wrapper.appendChild(institution);
      wrapper.appendChild(year);
      wrapper.appendChild(grade);
      container.appendChild(wrapper);
    }

    function addExperience() {
      const container = document.getElementById("experience-container");
      const input = document.createElement("textarea");
      input.rows = 2;
      input.className = "exp-entry";
      input.placeholder = "Fresher or Experienced";
      container.appendChild(input);
    }

    window.onload = () => {
      addEducation();
      addExperience();
    };

    document.getElementById("resume-form").addEventListener("submit", function(e) {
      e.preventDefault();
      const name = document.getElementById("name").value.trim();
      const email = document.getElementById("email").value.trim();
      const phone = document.getElementById("phone").value.trim();
      const summary = document.getElementById("summary").value.trim();
      const photoInput = document.getElementById("photo");
      const photoURL = photoInput.files.length ? URL.createObjectURL(photoInput.files[0]) : '';
      const expEntries = Array.from(document.querySelectorAll(".exp-entry")).map(el => el.value.trim()).filter(Boolean);
      const skills = document.getElementById("skills").value.trim().split('\n').filter(Boolean);
      const certs = document.getElementById("certifications").value.trim().split('\n').filter(Boolean);
      const langs = document.getElementById("languages").value.trim().split('\n').filter(Boolean);
      const strengths = document.getElementById("strengths").value.trim().split('\n').filter(Boolean);
      const weaknesses = document.getElementById("weaknesses").value.trim().split('\n').filter(Boolean);
      const hobbies = document.getElementById("hobbies").value.trim().split('\n').filter(Boolean);

      const eduInputs = Array.from(document.querySelectorAll(".edu-entry"));
      const eduEntries = [];
      for (let i = 0; i < eduInputs.length; i += 4) {
        const degree = eduInputs[i]?.value.trim();
        const inst = eduInputs[i+1]?.value.trim();
        const year = eduInputs[i+2]?.value.trim();
        const grade = eduInputs[i+3]?.value.trim();
        if (degree || inst || year || grade) {
          eduEntries.push({ degree, inst, year, grade });
        }
      }

      function makeList(arr) {
        return arr.length ? <ul>${arr.map(i => `<li>${i}</li>).join('')}</ul>` : '';
      }

      let educationHTML = '';
      if (eduEntries.length) {
        educationHTML += '<table class="education-table"><tr><th>Degree</th><th>Institution</th><th>Year</th><th>Grade</th></tr>';
        eduEntries.forEach(e => {
          educationHTML += <tr><td>${e.degree}</td><td>${e.inst}</td><td>${e.year}</td><td>${e.grade}</td></tr>;
        });
        educationHTML += '</table>';
      }

      const outputHTML = `
        <div class="resume-template">
          <h1> Resume</h1><hr>
          <div class="resume-header">
            <div class="info">
              <h2>${name}</h2>
              <p><strong>Email:</strong> ${email}<br><strong>Phone:</strong> ${phone}</p>
            </div>
            ${photoURL ? <img src="${photoURL}" alt="Profile Photo"> : ''}
          </div>
          ${summary ? <h3>Profile Summary</h3><p>${summary.replace(/\n/g, "<br>")}</p> : ''}
          ${educationHTML ? <h3>Education</h3>${educationHTML} : ''}
          <h3>Work Experience</h3>${makeList(expEntries)}
          <h3>Skills</h3>${makeList(skills)}
          ${certs.length ? <h3>Certifications</h3>${makeList(certs)} : ''}
          ${langs.length ? <h3>Languages</h3>${makeList(langs)} : ''}
          <div style="display:flex;gap:20px;">
            ${strengths.length ? <div><h3>Strengths</h3>${makeList(strengths)}</div> : ''}
            ${weaknesses.length ? <div><h3>Weaknesses</h3>${makeList(weaknesses)}</div> : ''}
          </div>
          ${hobbies.length ? <h3>Hobbies & Interests</h3>${makeList(hobbies)} : ''}
        </div>`;

      document.getElementById("resume-output").innerHTML =
        document.getElementById("preview-toggle").checked ? outputHTML : '';
    });

    function resetForm() {
      document.getElementById("resume-form").reset();
      document.getElementById("experience-container").innerHTML = '';
      document.getElementById("education-container").innerHTML = '';
      addEducation();
      addExperience();
      document.getElementById("resume-output").innerHTML = '';
    }

    document.getElementById("dark-mode-toggle").addEventListener("change", function () {
      document.body.classList.toggle("dark", this.checked);
    });

    document.getElementById("preview-toggle").addEventListener("change", function () {
      document.getElementById("resume-form").dispatchEvent(new Event("submit"));
    });

    function downloadPDF() {
      const out = document.getElementById("resume-output");
      if (!out.innerHTML.trim()) {
        alert("Please generate resume first.");
        return;
      }
      html2pdf().set({
        margin: 0.5,
        filename: "resume.pdf",
        image: { type: "jpeg", quality: 0.98 },
        html2canvas: { scale: 2 },
        jsPDF: { unit: "in", format: "letter", orientation: "portrait" }
      }).from(out).save();
    }
  </script>
</body>
</html>
